!function t(e,n,i){function r(s,o){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return r(n?n:t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){t("./src/template/helper"),tui.util.defineNamespace("tui.component.ImageEditor",t("./src/js/imageEditor"))},{"./src/js/imageEditor":30,"./src/template/helper":48}],2:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(){var t=new o.HandlebarsEnvironment;return m.extend(t,o),t.SafeString=c["default"],t.Exception=h["default"],t.Utils=m,t.escapeExpression=m.escapeExpression,t.VM=p,t.template=function(e){return p.template(e,t)},t}n.__esModule=!0;var s=t("./handlebars/base"),o=r(s),l=t("./handlebars/safe-string"),c=i(l),u=t("./handlebars/exception"),h=i(u),f=t("./handlebars/utils"),m=r(f),d=t("./handlebars/runtime"),p=r(d),g=t("./handlebars/no-conflict"),v=i(g),x=a();x.create=a,v["default"](x),x["default"]=x,n["default"]=x,e.exports=n["default"]},{"./handlebars/base":3,"./handlebars/exception":6,"./handlebars/no-conflict":16,"./handlebars/runtime":17,"./handlebars/safe-string":18,"./handlebars/utils":19}],3:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,n){this.helpers=t||{},this.partials=e||{},this.decorators=n||{},l.registerDefaultHelpers(this),c.registerDefaultDecorators(this)}n.__esModule=!0,n.HandlebarsEnvironment=r;var a=t("./utils"),s=t("./exception"),o=i(s),l=t("./helpers"),c=t("./decorators"),u=t("./logger"),h=i(u),f="4.0.5";n.VERSION=f;var m=7;n.COMPILER_REVISION=m;var d={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};n.REVISION_CHANGES=d;var p="[object Object]";r.prototype={constructor:r,logger:h["default"],log:h["default"].log,registerHelper:function(t,e){if(a.toString.call(t)===p){if(e)throw new o["default"]("Arg not supported with multiple helpers");a.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(a.toString.call(t)===p)a.extend(this.partials,t);else{if("undefined"==typeof e)throw new o["default"]('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(a.toString.call(t)===p){if(e)throw new o["default"]("Arg not supported with multiple decorators");a.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]}};var g=h["default"].log;n.log=g,n.createFrame=a.createFrame,n.logger=h["default"]},{"./decorators":4,"./exception":6,"./helpers":7,"./logger":15,"./utils":19}],4:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){s["default"](t)}n.__esModule=!0,n.registerDefaultDecorators=r;var a=t("./decorators/inline"),s=i(a)},{"./decorators/inline":5}],5:[function(t,e,n){"use strict";n.__esModule=!0;var i=t("../utils");n["default"]=function(t){t.registerDecorator("inline",function(t,e,n,r){var a=t;return e.partials||(e.partials={},a=function(r,a){var s=n.partials;n.partials=i.extend({},s,e.partials);var o=t(r,a);return n.partials=s,o}),e.partials[r.args[0]]=r.fn,a})},e.exports=n["default"]},{"../utils":19}],6:[function(t,e,n){"use strict";function i(t,e){var n=e&&e.loc,a=void 0,s=void 0;n&&(a=n.start.line,s=n.start.column,t+=" - "+a+":"+s);for(var o=Error.prototype.constructor.call(this,t),l=0;l<r.length;l++)this[r[l]]=o[r[l]];Error.captureStackTrace&&Error.captureStackTrace(this,i),n&&(this.lineNumber=a,this.column=s)}n.__esModule=!0;var r=["description","fileName","lineNumber","message","name","number","stack"];i.prototype=new Error,n["default"]=i,e.exports=n["default"]},{}],7:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){s["default"](t),l["default"](t),u["default"](t),f["default"](t),d["default"](t),g["default"](t),x["default"](t)}n.__esModule=!0,n.registerDefaultHelpers=r;var a=t("./helpers/block-helper-missing"),s=i(a),o=t("./helpers/each"),l=i(o),c=t("./helpers/helper-missing"),u=i(c),h=t("./helpers/if"),f=i(h),m=t("./helpers/log"),d=i(m),p=t("./helpers/lookup"),g=i(p),v=t("./helpers/with"),x=i(v)},{"./helpers/block-helper-missing":8,"./helpers/each":9,"./helpers/helper-missing":10,"./helpers/if":11,"./helpers/log":12,"./helpers/lookup":13,"./helpers/with":14}],8:[function(t,e,n){"use strict";n.__esModule=!0;var i=t("../utils");n["default"]=function(t){t.registerHelper("blockHelperMissing",function(e,n){var r=n.inverse,a=n.fn;if(e===!0)return a(this);if(e===!1||null==e)return r(this);if(i.isArray(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):r(this);if(n.data&&n.ids){var s=i.createFrame(n.data);s.contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:s}}return a(e,n)})},e.exports=n["default"]},{"../utils":19}],9:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}n.__esModule=!0;var r=t("../utils"),a=t("../exception"),s=i(a);n["default"]=function(t){t.registerHelper("each",function(t,e){function n(e,n,a){c&&(c.key=e,c.index=n,c.first=0===n,c.last=!!a,u&&(c.contextPath=u+e)),l+=i(t[e],{data:c,blockParams:r.blockParams([t[e],e],[u+e,null])})}if(!e)throw new s["default"]("Must pass iterator to #each");var i=e.fn,a=e.inverse,o=0,l="",c=void 0,u=void 0;if(e.data&&e.ids&&(u=r.appendContextPath(e.data.contextPath,e.ids[0])+"."),r.isFunction(t)&&(t=t.call(this)),e.data&&(c=r.createFrame(e.data)),t&&"object"==typeof t)if(r.isArray(t))for(var h=t.length;h>o;o++)o in t&&n(o,o,o===t.length-1);else{var f=void 0;for(var m in t)t.hasOwnProperty(m)&&(void 0!==f&&n(f,o-1),f=m,o++);void 0!==f&&n(f,o-1,!0)}return 0===o&&(l=a(this)),l})},e.exports=n["default"]},{"../exception":6,"../utils":19}],10:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}n.__esModule=!0;var r=t("../exception"),a=i(r);n["default"]=function(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new a["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=n["default"]},{"../exception":6}],11:[function(t,e,n){"use strict";n.__esModule=!0;var i=t("../utils");n["default"]=function(t){t.registerHelper("if",function(t,e){return i.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||i.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},e.exports=n["default"]},{"../utils":19}],12:[function(t,e,n){"use strict";n.__esModule=!0,n["default"]=function(t){t.registerHelper("log",function(){for(var e=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)e.push(arguments[i]);var r=1;null!=n.hash.level?r=n.hash.level:n.data&&null!=n.data.level&&(r=n.data.level),e[0]=r,t.log.apply(t,e)})},e.exports=n["default"]},{}],13:[function(t,e,n){"use strict";n.__esModule=!0,n["default"]=function(t){t.registerHelper("lookup",function(t,e){return t&&t[e]})},e.exports=n["default"]},{}],14:[function(t,e,n){"use strict";n.__esModule=!0;var i=t("../utils");n["default"]=function(t){t.registerHelper("with",function(t,e){i.isFunction(t)&&(t=t.call(this));var n=e.fn;if(i.isEmpty(t))return e.inverse(this);var r=e.data;return e.data&&e.ids&&(r=i.createFrame(e.data),r.contextPath=i.appendContextPath(e.data.contextPath,e.ids[0])),n(t,{data:r,blockParams:i.blockParams([t],[r&&r.contextPath])})})},e.exports=n["default"]},{"../utils":19}],15:[function(t,e,n){"use strict";n.__esModule=!0;var i=t("./utils"),r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=i.indexOf(r.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=r.lookupLevel(t),"undefined"!=typeof console&&r.lookupLevel(r.level)<=t){var e=r.methodMap[t];console[e]||(e="log");for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;n>a;a++)i[a-1]=arguments[a];console[e].apply(console,i)}}};n["default"]=r,e.exports=n["default"]},{"./utils":19}],16:[function(t,e,n){(function(t){"use strict";n.__esModule=!0,n["default"]=function(e){var n="undefined"!=typeof t?t:window,i=n.Handlebars;e.noConflict=function(){return n.Handlebars===e&&(n.Handlebars=i),e}},e.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t){var e=t&&t[0]||1,n=v.COMPILER_REVISION;if(e!==n){if(n>e){var i=v.REVISION_CHANGES[n],r=v.REVISION_CHANGES[e];throw new g["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new g["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function s(t,e){function n(n,i,r){r.hash&&(i=d.extend({},i,r.hash),r.ids&&(r.ids[0]=!0)),n=e.VM.resolvePartial.call(this,n,i,r);var a=e.VM.invokePartial.call(this,n,i,r);if(null==a&&e.compile&&(r.partials[r.name]=e.compile(n,t.compilerOptions,e),a=r.partials[r.name](i,r)),null!=a){if(r.indent){for(var s=a.split("\n"),o=0,l=s.length;l>o&&(s[o]||o+1!==l);o++)s[o]=r.indent+s[o];a=s.join("\n")}return a}throw new g["default"]("The partial "+r.name+" could not be compiled when running in runtime-only mode")}function i(e){function n(e){return""+t.main(r,e,r.helpers,r.partials,s,l,o)}var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=a.data;i._setup(a),!a.partial&&t.useData&&(s=h(e,s));var o=void 0,l=t.useBlockParams?[]:void 0;return t.useDepths&&(o=a.depths?e!==a.depths[0]?[e].concat(a.depths):a.depths:[e]),(n=f(t.main,n,r,a.depths||[],s,l))(e,a)}if(!e)throw new g["default"]("No environment passed to template");if(!t||!t.main)throw new g["default"]("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var r={strict:function(t,e){if(!(e in t))throw new g["default"]('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var n=t.length,i=0;n>i;i++)if(t[i]&&null!=t[i][e])return t[i][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:d.escapeExpression,invokePartial:n,fn:function(e){var n=t[e];return n.decorator=t[e+"_d"],n},programs:[],program:function(t,e,n,i,r){var a=this.programs[t],s=this.fn(t);return e||r||i||n?a=o(this,t,s,e,n,i,r):a||(a=this.programs[t]=o(this,t,s)),a},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=d.extend({},e,t)),n},noop:e.VM.noop,compilerInfo:t.compiler};return i.isTop=!0,i._setup=function(n){n.partial?(r.helpers=n.helpers,r.partials=n.partials,r.decorators=n.decorators):(r.helpers=r.merge(n.helpers,e.helpers),t.usePartial&&(r.partials=r.merge(n.partials,e.partials)),(t.usePartial||t.useDecorators)&&(r.decorators=r.merge(n.decorators,e.decorators)))},i._child=function(e,n,i,a){if(t.useBlockParams&&!i)throw new g["default"]("must pass block params");if(t.useDepths&&!a)throw new g["default"]("must pass parent depths");return o(r,e,t[e],n,0,i,a)},i}function o(t,e,n,i,r,a,s){function o(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=s;return s&&e!==s[0]&&(o=[e].concat(s)),n(t,e,t.helpers,t.partials,r.data||i,a&&[r.blockParams].concat(a),o)}return o=f(n,o,t,s,i,a),o.program=e,o.depth=s?s.length:0,o.blockParams=r||0,o}function l(t,e,n){return t?t.call||n.name||(n.name=t,t=n.partials[t]):t="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],t}function c(t,e,n){n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var i=void 0;if(n.fn&&n.fn!==u&&(n.data=v.createFrame(n.data),i=n.data["partial-block"]=n.fn,i.partials&&(n.partials=d.extend({},n.partials,i.partials))),void 0===t&&i&&(t=i),void 0===t)throw new g["default"]("The partial "+n.name+" could not be found");return t instanceof Function?t(e,n):void 0}function u(){return""}function h(t,e){return e&&"root"in e||(e=e?v.createFrame(e):{},e.root=t),e}function f(t,e,n,i,r,a){if(t.decorator){var s={};e=t.decorator(e,s,n,i&&i[0],r,a,i),d.extend(e,s)}return e}n.__esModule=!0,n.checkRevision=a,n.template=s,n.wrapProgram=o,n.resolvePartial=l,n.invokePartial=c,n.noop=u;var m=t("./utils"),d=r(m),p=t("./exception"),g=i(p),v=t("./base")},{"./base":3,"./exception":6,"./utils":19}],18:[function(t,e,n){"use strict";function i(t){this.string=t}n.__esModule=!0,i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},n["default"]=i,e.exports=n["default"]},{}],19:[function(t,e,n){"use strict";function i(t){return h[t]}function r(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}function a(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1}function s(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return m.test(t)?t.replace(f,i):t}function o(t){return t||0===t?!(!g(t)||0!==t.length):!0}function l(t){var e=r({},t);return e._parent=t,e}function c(t,e){return t.path=e,t}function u(t,e){return(t?t+".":"")+e}n.__esModule=!0,n.extend=r,n.indexOf=a,n.escapeExpression=s,n.isEmpty=o,n.createFrame=l,n.blockParams=c,n.appendContextPath=u;var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},f=/[&<>"'`=]/g,m=/[&<>"'`=]/,d=Object.prototype.toString;n.toString=d;var p=function(t){return"function"==typeof t};p(/x/)&&(n.isFunction=p=function(t){return"function"==typeof t&&"[object Function]"===d.call(t)}),n.isFunction=p;var g=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===d.call(t):!1};n.isArray=g},{}],20:[function(t,e,n){e.exports=t("./dist/cjs/handlebars.runtime")["default"]},{"./dist/cjs/handlebars.runtime":2}],21:[function(t,e,n){e.exports=t("handlebars/runtime")["default"]},{"handlebars/runtime":20}],22:[function(t,e,n){"use strict";var i=tui.util.isExisty,r=tui.util.isString,a=tui.util.defineClass({init:function(){this.customEvents=new tui.util.CustomEvents},register:function(){var t=this.customEvents;t.on.apply(t,arguments)},deregister:function(){var t=this.customEvents;t.off.apply(t,arguments)},invoke:function(t){var e=t.name,n=t.args,a=this.customEvents;return(i(n)&&!i(n.length)||r(n))&&(n=[n]),n=n||[],Array.prototype.unshift.call(n,e),a.invoke.apply(a,n)}});e.exports=a},{}],23:[function(t,e,n){"use strict";e.exports={CLASSNAME_PREFIX:"tui-image-editor",IS_SUPPORT_FILE_API:!!(window.File&&window.FileList&&window.FileReader),commands:{SET_CANVAS_ELEMENT:"setCanvasElement",SET_CANVAS_IMAGE:"setCanvasImage",LOAD_IMAGE_FROM_URL:"loadImageFromUrl",LOAD_IMAGE_FROM_FILE:"loadImageFromFile",ON_LOAD_IMAGE:"onLoadImage",START_CROPPING:"startCropping",END_CROPPING:"endCropping"}}},{}],24:[function(t,e,n){"use strict";var i=t("../util"),r="tl",a="tr",s="mt",o="ml",l="mr",c="mb",u="bl",h="br",f=i.clamp,m=fabric.util.createClass(fabric.Rect,{initialize:function(t){this.callSuper("initialize",t),this.on({moving:this._onMoving,scaling:this._onScaling})},_render:function(t){var e,n,i,r,a=7,s=7;this.callSuper("_render",t),e=this.flipX?-1:1,n=this.flipY?-1:1,i=e/this.scaleX,r=n/this.scaleY,t.scale(i,r),this._fillOuterRect(t,"rgba(0, 0, 0, 0.55)"),this._strokeBorder(t,"rgb(0, 0, 0)",a),this._strokeBorder(t,"rgb(255, 255, 255)",a,s),t.scale(1/i,1/r)},_fillOuterRect:function(t,e){var n=this._getCoordinates(t),i=n.x,r=n.y;t.save(),t.fillStyle=e,t.beginPath(),t.moveTo(i[0]-1,r[0]-1),t.lineTo(i[3]+1,r[0]-1),t.lineTo(i[3]+1,r[3]+1),t.lineTo(i[0]-1,r[3]-1),t.lineTo(i[0]-1,r[0]-1),t.closePath(),t.moveTo(i[1],r[1]),t.lineTo(i[1],r[2]),t.lineTo(i[2],r[2]),t.lineTo(i[2],r[1]),t.lineTo(i[1],r[1]),t.closePath(),t.fill(),t.restore()},_getCoordinates:function(t){var e=Math.ceil,n=this.getWidth(),i=this.getHeight(),r=n/2,a=i/2,s=this.getLeft(),o=this.getTop(),l=t.canvas;return{x:tui.util.map([-(r+s),-r,r,r+(l.width-s-n)],e),y:tui.util.map([-(a+o),-a,a,a+(l.height-o-i)],e)}},_strokeBorder:function(t,e,n,i){var r=this.getWidth()/2,a=this.getHeight()/2;t.save(),t.strokeStyle=e,t.setLineDash&&t.setLineDash([n,n]),i&&(t.lineDashOffset=i),t.beginPath(),t.moveTo(-r,-a),t.lineTo(r,-a),t.lineTo(r,a),t.lineTo(-r,a),t.lineTo(-r,-a),t.stroke(),t.restore()},_onMoving:function(){var t=this.canvas,e=this.getLeft(),n=this.getTop(),i=this.getWidth(),r=this.getHeight(),a=t.getWidth()-i,s=t.getHeight()-r;this.setLeft(f(e,0,a)),this.setTop(f(n,0,s))},_onScaling:function(t){var e=this.canvas.getPointer(t.e),n=this._calcScalingSizeFromPointer(e);this.scale(1).set(n)},_calcScalingSizeFromPointer:function(t){var e=t.x,n=t.y,i=this._calcTopLeftScalingSizeFromPointer(e,n),r=this._calcBottomRightScalingSizeFromPointer(e,n);return this._makeScalingSettings(i,r)},_calcTopLeftScalingSizeFromPointer:function(t,e){var n=this.getHeight()+this.top,i=this.getWidth()+this.left,r=f(e,0,n-1),a=f(t,0,i-1);return{top:r,left:a,width:i-a,height:n-r}},_calcBottomRightScalingSizeFromPointer:function(t,e){var n=this.canvas,i=n.width,r=n.height,a=this.left,s=this.top;return{width:f(t,a+1,i)-a,height:f(e,s+1,r)-s}},_makeScalingSettings:function(t,e){var n,i=t.width,f=t.height,m=e.height,d=e.width,p=t.left,g=t.top;switch(this.__corner){case r:n=t;break;case a:n={width:d,height:f,top:g};break;case u:n={width:i,height:m,left:p};break;case h:n=e;break;case o:n={width:i,left:p};break;case s:n={height:f,top:g};break;case l:n={width:d};break;case c:n={height:m}}return n},isValid:function(){return this.left>=0&&this.top>=0&&this.width>0&&this.height>0}});e.exports=m},{"../util":36}],25:[function(t,e,n){"use strict";function i(t,e){return new r(t,e)}var r=t("../view/button");e.exports={create:i}},{"../view/button":38}],26:[function(t,e,n){"use strict";var i={UN_IMPLEMENTATION:"Should implement a method: ",NO_VIEW_NAME:"Should set a view name",NO_ELEMENT:"Should render element(s): ",UNKNOWN:"Unknown: "},r={unimplementation:function(t){return i.UN_IMPLEMENTATION+t},noview:function(){return i.NO_VIEW_NAME},noelement:function(t){return i.NO_ELEMENT+t},unknown:function(t){return i.UNKNOWN+t}};e.exports={create:function(t){var e;return t=t.toLowerCase(),e=r[t]||r.unknown,Array.prototype.shift.apply(arguments),e.apply(null,arguments)}}},{}],27:[function(t,e,n){"use strict";var i=t("../interface/component"),r=t("../extension/cropzone"),a=t("../util"),s=t("../consts").commands,o=10,l=Math.abs,c=a.clamp,u=tui.util.defineClass(i,{init:function(t){this.setParent(t),this.registerAction(s.START_CROPPING,this.start,this),this.registerAction(s.END_CROPPING,this.end,this),this.cropzone=null,this.startX=null,this.startY=null,this.handlers={mousedown:$.proxy(this.onFabricMouseDown,this),mousemove:$.proxy(this.onFabricMouseMove,this),mouseup:$.proxy(this.onFabricMouseUp,this)}},start:function(){var t;this.cropzone||(this.cropzone=new r({left:-10,top:-10,width:1,height:1,cornerSize:10,cornerColor:"black",fill:"transparent",hasRotatingPoint:!1,hasBorders:!1,lockScalingFlip:!0,lockRotation:!0}),t=this.getCanvas(),t.add(this.cropzone),t.on("mouse:down",this.handlers.mousedown),t.defaultCursor="crosshair")},onFabricMouseDown:function(t){var e,n=this.getCanvas();t.target||(n.selection=!1,e=n.getPointer(t.e),this.startX=e.x,this.startY=e.y,n.on({"mouse:move":this.handlers.mousemove,"mouse:up":this.handlers.mouseup}))},onFabricMouseMove:function(t){var e=this.getCanvas(),n=e.getPointer(t.e),i=n.x,r=n.y,a=this.cropzone;l(i-this.startX)+l(r-this.startY)>o&&(a.remove(),a.set(this._calcRectDimensionFromPoint(i,r)),e.add(a))},_calcRectDimensionFromPoint:function(t,e){var n=this.getCanvas(),i=n.getWidth(),r=n.getHeight(),a=this.startX,s=this.startY,o=c(t,0,a),l=c(e,0,s);return{left:o,top:l,width:c(t,a,i)-o,height:c(e,s,r)-l}},onFabricMouseUp:function(){var t=this.cropzone,e=this.handlers,n=this.getCanvas();n.setActiveObject(t),n.off({"mouse:move":e.mousemove,"mouse:up":e.mouseup})},end:function(t){var e,n=this.getCanvas(),i=this.cropzone;this.cropzone=null,i.remove(),n.selection=!0,n.defaultCursor="default",n.discardActiveObject(),n.off("mouse:down",this.handlers.mousedown),i.isValid()&&t&&(e={left:i.getLeft(),top:i.getTop(),width:i.getWidth(),height:i.getHeight()},this.postCommand({name:s.LOAD_IMAGE_FROM_URL,args:[n.toDataURL(e),this.getImageName()]}))}});e.exports=u},{"../consts":23,"../extension/cropzone":24,"../interface/component":31,"../util":36}],28:[function(t,e,n){"use strict";var i=t("../interface/component"),r=t("../consts").commands,a=tui.util.defineClass(i,{init:function(t){this.setParent(t),this.registerAction(r.LOAD_IMAGE_FROM_URL,this.loadImageFromURL,this),this.registerAction(r.LOAD_IMAGE_FROM_FILE,this.loadImageFromFile,this)},loadImageFromURL:function(t,e){var n=this.getCanvas(),i=this;n.setBackgroundImage(t,function(){var r=n.backgroundImage;n.setDimensions({width:"100%","max-width":r.width+"px",height:""},{cssOnly:!0}).setDimensions({width:r.width,height:r.height},{backstoreOnly:!0}),i.postCommands(e||t,r)},{crossOrigin:""})},loadImageFromFile:function(t){t&&this.loadImageFromURL(URL.createObjectURL(t),t.name)},postCommands:function(t,e){t=t||"unknown",this.postCommand({name:r.SET_CANVAS_IMAGE,args:[e,t]}),this.postCommand({name:r.ON_LOAD_IMAGE,args:tui.util.extend({imageName:t},this.getSize(e))})},getSize:function(t){var e=$(this.getCanvas().getSelectionElement());return{originalWidth:t.width,originalHeight:t.height,currentWidth:e.width(),currentHeight:e.height()}}});e.exports=a},{"../consts":23,"../interface/component":31}],29:[function(t,e,n){"use strict";var i=t("../interface/component"),r=t("./imageLoader"),a=t("./cropper"),s=t("../consts").commands,o=tui.util.defineClass(i,{init:function(t){this.broker=t,this.canvas=null,this.oImage=null,this.components=null,this.registerActions()},registerActions:function(){this.registerAction(s.SET_CANVAS_ELEMENT,this.setCanvasElement,this),this.registerAction(s.SET_CANVAS_IMAGE,this.setCanvasImage,this)},setCanvasImage:function(t,e){this.oImage=t,this.imageName=e},setCanvasElement:function(t){this.canvas=new fabric.Canvas(t,{isDrawingMode:!1}),this.setComponents()},setComponents:function(){this.components={imageLoader:new r(this),cropper:new a(this)}},registerAction:function(){var t=this.broker;t.register.apply(t,arguments)},deregisterAction:function(){var t=this.broker;t.deregister.apply(t,arguments)},postCommand:function(t){return this.broker.invoke(t)},toDataURL:function(t){return this.canvas&&this.canvas.toDataURL(t)}});e.exports=o},{"../consts":23,"../interface/component":31,"./cropper":27,"./imageLoader":28}],30:[function(t,e,n){"use strict";var i=t("./view/main"),r=t("./handler/main"),a=t("./broker"),s=t("./consts").commands,o=tui.util.defineClass({init:function(t){var e=new a;this.broker=e,this.mainHandler=new r(e),this.mainView=new i(e,t)},_invoke:function(t){this.broker.invoke(t)},loadImageFromURL:function(t,e){this._invoke({name:s.LOAD_IMAGE_FROM_URL,args:[t,e]})},loadImageFromFile:function(t){this._invoke({name:s.LOAD_IMAGE_FROM_FILE,args:t})},startCropping:function(){this._invoke({name:s.START_CROPPING})},endCropping:function(t){this._invoke({name:s.END_CROPPING,args:t})},toDataURL:function(t){return this.mainHandler.toDataURL(t)},getImageName:function(){return this.mainHandler.getImageName()}});e.exports=o},{"./broker":22,"./consts":23,"./handler/main":29,"./view/main":42}],31:[function(t,e,n){"use strict";var i=t("../mixin/mixer"),r=tui.util.defineClass({init:function(){},getCanvas:function(){return this===this.getRoot()?this.canvas:this.getRoot().getCanvas()},getComponent:function(t){return this===this.getRoot()?this.components[t]:this.getRoot().getComponent(t)},getCanvasImage:function(){return this===this.getRoot()?this.oImage:this.getRoot().getCanvasImage()},getImageName:function(){return this===this.getRoot()?this.imageName:this.getRoot().getImageName()}});i.mixin(r,"Delegator"),e.exports=r},{"../mixin/mixer":35}],32:[function(t,e,n){"use strict";var i=t("../mixin/mixer"),r=t("../factory/errorMessage").create,a=tui.util.defineClass({init:function(t){this.$element=null,this.setParent(t)},getElement:function(){var t=this.$element;if(!t)throw new Error(r("noElement",this.getName()));return t},getName:function(){var t=this.name;if(!t)throw new Error(r("noView"));return t},template:function(){throw new Error(r("unImplementation","template"))},render:function(t){var e=this.templateContext;this.destroy(),this.$element=$(this.template(e)),t&&t.append(this.$element),this.doAfterRender&&this.doAfterRender()},destroy:function(){var t;this.doBeforeDestroy&&this.doBeforeDestroy(),t=this.$element,t&&t.remove(),this.$element=null}});i.mixin(a,"Delegator"),e.exports=a},{"../factory/errorMessage":26,"../mixin/mixer":35}],33:[function(t,e,n){"use strict";var i=t("../factory/errorMessage").create,r={setParent:function(t){this._parent=t||null},getParent:function(){return this._parent},getRoot:function(){for(var t=this.getParent(),e=this;t;)e=t,t=e.getParent();return e},postCommand:function(t,e){var n=this.getRoot();if(this.postCommand===n.postCommand)throw new Error(i("unImplementation","postCommand"));n.postCommand(t,e)},registerAction:function(){var t=this.getRoot();if(this.registerAction===t.registerAction)throw new Error(i("unImplementation","registerAction"));t.registerAction.apply(t,arguments)},deregisterAction:function(){var t=this.getRoot();if(this.deregisterAction===t.deregisterAction)throw new Error(i("unImplementation","deregisterAction"));t.deregisterAction.apply(t,arguments)}};e.exports=r},{"../factory/errorMessage":26}],34:[function(t,e,n){"use strict";var i={addChild:function(t){var e=t.getName();this._children=this._children||{},this.removeChild(e),this._children[e]=t,t.render(this.getElement())},removeChild:function(t){var e=this._children,n=e[t];n&&(n.destroy(),delete e[t])},clearChildren:function(){tui.util.forEach(this._children,function(t){t.destroy()}),this._children={}}};e.exports=i},{}],35:[function(t,e,n){"use strict";function i(t){return o[t.toLowerCase()]}function r(t,e){tui.util.extend(t.prototype,i(e))}var a=t("./branchView"),s=t("./Delegator"),o={branchview:a,delegator:s};e.exports={getMixture:i,mixin:r}},{"./Delegator":33,"./branchView":34}],36:[function(t,e,n){"use strict";var i=Math.min,r=Math.max;e.exports={clamp:function(t,e,n){var a;return e>n&&(a=e,e=n,n=a),r(e,i(t,n))}}},{}],37:[function(t,e,n){"use strict";var i=t("../interface/view"),r=t("../mixin/mixer"),a=t("../factory/button"),s=t("../consts").commands,o=t("../../template/container.hbs"),l=tui.util.defineClass(i,{init:function(t){i.call(this,t)},name:"subButtonGroup",templateContext:{name:"subButtonGroup"},template:o,doAfterRender:function(){this.addChild(a.create(this,{name:"Apply",templateContext:{text:"Apply"},clickCommand:{name:s.END_CROPPING,args:!0}})),this.addChild(a.create(this,{name:"Cancel",templateContext:{text:"Cancel"},clickCommand:{name:s.END_CROPPING,args:!1}}))},doBeforeDestroy:function(){this.clearChildren()}});r.mixin(l,"BranchView"),e.exports=l},{"../../template/container.hbs":47,"../consts":23,"../factory/button":25,"../interface/view":32,"../mixin/mixer":35}],38:[function(t,e,n){"use strict";var i=t("../interface/view"),r=t("../../template/button.hbs"),a=tui.util.defineClass(i,{init:function(t,e){i.call(this,t),e=e||{},this.name=e.name,this.templateContext=null,this.clickCommand=e.clickCommand,this.setTemplateContext(e.templateContext)},templateContext:{buttonName:"button"},template:r,doAfterRender:function(){this.clickCommand&&this.$element.on("click",$.proxy(function(){this.postCommand(this.clickCommand)},this))},setTemplateContext:function(t){this.templateContext=tui.util.extend({},a.prototype.templateContext,t)}});e.exports=a},{"../../template/button.hbs":45,"../interface/view":32}],39:[function(t,e,n){"use strict";var i=t("../interface/view"),r=t("../consts").commands,a=t("../../template/canvas.hbs"),s=tui.util.defineClass(i,{init:function(t){i.call(this,t),this.registerAction(r.ON_LOAD_IMAGE,function(t){this.$element.css("height",t.currentHeight)},this)},name:"canvas",templateContext:{name:"canvas"},template:a,doAfterRender:function(){this.postCommand({name:r.SET_CANVAS_ELEMENT,args:this.$element.find("canvas")[0]})}});e.exports=s},{"../../template/canvas.hbs":46,"../consts":23,"../interface/view":32}],40:[function(t,e,n){"use strict";var i=t("../interface/view"),r=t("./imageInformation"),a=t("../mixin/mixer"),s=t("../consts").commands,o=t("../../template/container.hbs"),l=tui.util.defineClass(i,{init:function(t){i.call(this,t)},name:"detail",templateContext:{name:"detail"},template:o,doAfterRender:function(){this.registerAction(s.ON_LOAD_IMAGE,function(t){this.addChild(new r(this,t))},this)},doBeforeDestroy:function(){this.clearChildren()}});a.mixin(l,"BranchView"),e.exports=l},{"../../template/container.hbs":47,"../consts":23,"../interface/view":32,"../mixin/mixer":35,"./imageInformation":41}],41:[function(t,e,n){"use strict";var i=t("../interface/view"),r=t("../consts"),a=t("../../template/ImageInformation.hbs"),s=r.commands,o=tui.util.defineClass(i,{init:function(t,e){i.call(this,t),this.setTemplateContext(e)},name:"imageInformation",template:a,templateContext:{title:"title",imageInformation:"imageInformation",original:"original",current:"current",spanText:"spanText"},doAfterRender:function(){var t=r.CLASSNAME_PREFIX,e=t+"-"+this.templateContext.current,n=this.$element.find("."+e);this.registerAction(s.ON_SCALE_IMAGE,$.proxy(function(t){t.onScaling=!0,n.html(this.template(t))},this))},doBeforeDestroy:function(){this.deregisterAction(this)},setTemplateContext:function(t){this.templateContext=tui.util.extend({},o.prototype.templateContext,t)}});e.exports=o},{"../../template/ImageInformation.hbs":44,"../consts":23,"../interface/view":32}],42:[function(t,e,n){"use strict";var i=t("../interface/view"),r=t("./menu"),a=t("./canvas"),s=t("./detail"),o=t("../mixin/mixer"),l=t("../../template/container.hbs"),c=tui.util.defineClass(i,{init:function(t,e){i.call(this),this.broker=t,this.render(),this.getElement().appendTo(e)},name:"main",templateContext:{name:"main"},template:l,doAfterRender:function(){this.addChild(new s(this)),this.addChild(new r(this)),this.addChild(new a(this))},doBeforeDestroy:function(){this.deregisterAction(this),this.clearChildren()},postCommand:function(t){return this.broker.invoke(t)},registerAction:function(){var t=this.broker;t.register.apply(t,arguments)},deregisterAction:function(){var t=this.broker;t.register.apply(t,arguments)}});o.mixin(c,"BranchView"),e.exports=c},{"../../template/container.hbs":47,"../interface/view":32,"../mixin/mixer":35,"./canvas":39,"./detail":40,"./menu":43}],43:[function(t,e,n){"use strict";var i=t("../interface/view"),r=t("../factory/button"),a=t("./CropSubButtonGroup"),s=t("../consts").commands,o=t("../mixin/mixer"),l=t("../../template/container.hbs"),c=tui.util.defineClass(i,{init:function(t){i.call(this,t)},name:"menu",templateContext:{name:"menu"},template:l,doAfterRender:function(){this._addChildren(),this._registerActions()},_addChildren:function(){this.addChild(r.create(this,{name:"Crop",templateContext:{text:"Crop"},clickCommand:{name:s.START_CROPPING}}))},_registerActions:function(){this.registerAction(s.START_CROPPING,function(){
this.addChild(new a(this))},this),this.registerAction(s.END_CROPPING,function(){this.removeChild("subButtonGroup")},this)},doBeforeDestroy:function(){this.clearChildren()}});o.mixin(c,"BranchView"),e.exports=c},{"../../template/container.hbs":47,"../consts":23,"../factory/button":25,"../interface/view":32,"../mixin/mixer":35,"./CropSubButtonGroup":37}],44:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,r){var a,s=null!=e?e:{},o=n.helperMissing,l=t.escapeExpression,c="function";return'    Current width: <span class="'+l((n.className||e&&e.className||o).call(s,null!=e?e.spanText:e,{name:"className",hash:{},data:r}))+'">'+l((a=null!=(a=n.currentWidth||(null!=e?e.currentWidth:e))?a:o,typeof a===c?a.call(s,{name:"currentWidth",hash:{},data:r}):a))+'px</span>\n    <br>\n    Current height: <span class="'+l((n.className||e&&e.className||o).call(s,null!=e?e.spanText:e,{name:"className",hash:{},data:r}))+'">'+l((a=null!=(a=n.currentHeight||(null!=e?e.currentHeight:e))?a:o,typeof a===c?a.call(s,{name:"currentHeight",hash:{},data:r}):a))+"px</span>\n"},3:function(t,e,n,i,r){var a,s=null!=e?e:{},o=n.helperMissing,l=t.escapeExpression,c="function";return'    <div class="'+l((n.className||e&&e.className||o).call(s,null!=e?e.imageInformation:e,{name:"className",hash:{},data:r}))+'">\n        <h1 class="'+l((n.className||e&&e.className||o).call(s,null!=e?e.title:e,{name:"className",hash:{},data:r}))+'">'+l((a=null!=(a=n.imageName||(null!=e?e.imageName:e))?a:o,typeof a===c?a.call(s,{name:"imageName",hash:{},data:r}):a))+'</h1>\n        <div class="'+l((n.className||e&&e.className||o).call(s,null!=e?e.original:e,{name:"className",hash:{},data:r}))+'">\n            Original width: <span class="'+l((n.className||e&&e.className||o).call(s,null!=e?e.spanText:e,{name:"className",hash:{},data:r}))+'">'+l((a=null!=(a=n.originalWidth||(null!=e?e.originalWidth:e))?a:o,typeof a===c?a.call(s,{name:"originalWidth",hash:{},data:r}):a))+'px</span>\n            <br>\n            Original height: <span class="'+l((n.className||e&&e.className||o).call(s,null!=e?e.spanText:e,{name:"className",hash:{},data:r}))+'">'+l((a=null!=(a=n.originalHeight||(null!=e?e.originalHeight:e))?a:o,typeof a===c?a.call(s,{name:"originalHeight",hash:{},data:r}):a))+'px</span>\n        </div>\n        <div class="'+l((n.className||e&&e.className||o).call(s,null!=e?e.current:e,{name:"className",hash:{},data:r}))+'">\n            Current width: <span class="'+l((n.className||e&&e.className||o).call(s,null!=e?e.spanText:e,{name:"className",hash:{},data:r}))+'">'+l((a=null!=(a=n.currentWidth||(null!=e?e.currentWidth:e))?a:o,typeof a===c?a.call(s,{name:"currentWidth",hash:{},data:r}):a))+'px</span>\n            <br>\n            Current height: <span class="'+l((n.className||e&&e.className||o).call(s,null!=e?e.spanText:e,{name:"className",hash:{},data:r}))+'">'+l((a=null!=(a=n.currentHeight||(null!=e?e.currentHeight:e))?a:o,typeof a===c?a.call(s,{name:"currentHeight",hash:{},data:r}):a))+"px</span>\n        </div>\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var a;return null!=(a=n["if"].call(null!=e?e:{},null!=e?e.onScaling:e,{name:"if",hash:{},fn:t.program(1,r,0),inverse:t.program(3,r,0),data:r}))?a:""},useData:!0})},{"hbsfy/runtime":21}],45:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var a,s=null!=e?e:{},o=n.helperMissing,l=t.escapeExpression;return'<button class="'+l((n.className||e&&e.className||o).call(s,null!=e?e.buttonName:e,{name:"className",hash:{},data:r}))+'">'+l((a=null!=(a=n.text||(null!=e?e.text:e))?a:o,"function"==typeof a?a.call(s,{name:"text",hash:{},data:r}):a))+"</button>\n"},useData:!0})},{"hbsfy/runtime":21}],46:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){return'<div class="'+t.escapeExpression((n.className||e&&e.className||n.helperMissing).call(null!=e?e:{},null!=e?e.name:e,{name:"className",hash:{},data:r}))+'">\n    <canvas></canvas>\n</div>\n'},useData:!0})},{"hbsfy/runtime":21}],47:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){return'<div class="tui-image-editor-container '+t.escapeExpression((n.className||e&&e.className||n.helperMissing).call(null!=e?e:{},null!=e?e.name:e,{name:"className",hash:{},data:r}))+'"></div>\n'},useData:!0})},{"hbsfy/runtime":21}],48:[function(t,e,n){"use strict";var i=t("hbsfy/runtime"),r=t("./../js/consts");i.registerHelper("className",function(t){return r.CLASSNAME_PREFIX+"-"+t})},{"./../js/consts":23,"hbsfy/runtime":21}]},{},[1]);