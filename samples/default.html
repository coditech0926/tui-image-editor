<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Default</title>
    <link href="css/tui-image-editor.css" rel="stylesheet" type="text/css">
    <!--[If lt IE 9]>
        <script type="text/javascript" src="libs/html5shiv-printshiv.min.js"></script>
        <script type="text/javascript" src="libs/json2.js"></script>
        <script type="text/javascript" src="libs/excanvas.js"></script>
    <![endif]-->

</head>
<body>
    <div>
        <a id="btn-download"><button>다운로드</button></a>
    </div>
    <br>
    <div>
        <div id="uploader"></div>
        <div id="list">
            <div class="count">count : <strong id="file_count"></strong></div>
            <div class="size">size : <strong id="size_count"></strong></div>
            <ul id="files"></ul>
        </div>
    </div>
    <div id="editor"></div>
    <script type="text/javascript" src="libs/fabric.js"></script>
    <script type="text/javascript" src="libs/jquery.min.js"></script>
    <script type="text/javascript" src="libs/code-snippet.js"></script>
    <script type="text/javascript" src="libs/file-uploader.min.js"></script>
    <script type="text/javascript" src="js/image-editor.js"></script>
    <script type="text/javascript">
        var imageEditor = new tui.component.ImageEditor('#editor'),
            downloadBtn = document.getElementById('btn-download');

        imageEditor.loadImageFromURL('tree.jpg', './img/tree.jpg');
        downloadBtn.addEventListener('click', function () {
            downloadBtn.download = imageEditor.getImageName();
            downloadBtn.href = imageEditor.toDataURL();
        });

        var uploader = new tui.component.Uploader({
            url: {
                send: 'http://10.77.29.126:4000/upload',
                remove: 'http://10.77.29.126:4000/remove'
            },
            formTarget: 'hiddenFrame',
            listInfo: {
                list: $('#files'),
                count: $('#file_count'),
                size: $('#size_count')
            }
        }, $('#uploader'));

        uploader.on('success', function(data) {
            var fileInfo = data.filelist[0],
                filename = fileInfo.name;

            imageEditor.loadImageFromURL(filename, fileInfo.path);
        })
    </script>
</body>
</html>
